function flashVersion(){return Tumblr.flashVersion()}function renderVideo(e,t,i,n,l){Tumblr.renderVideo(e,t,i,n,l)}function replaceIfFlash(e,t,i){Tumblr.replaceIfFlash(e,t,i)}if(!Tumblr)var Tumblr={};Tumblr.flashVersion=function(){if(navigator.plugins&&navigator.plugins.length>0){var e=navigator.mimeTypes;if(e&&e["application/x-shockwave-flash"]&&e["application/x-shockwave-flash"].enabledPlugin&&e["application/x-shockwave-flash"].enabledPlugin.description)return parseInt(e["application/x-shockwave-flash"].enabledPlugin.description.split(" ")[2].split(".")[0],10)}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript){try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),i=t.GetVariable("$version");return i.split(",")[0].split(" ")[1]}catch(n){}return 0}},Tumblr.replaceIfFlash=function(e,t,i){Tumblr.flashVersion()>=e&&(document.getElementById(t).innerHTML=i)},Tumblr.renderVideo=function(e,t,i,n,l){var o=navigator.userAgent.toLowerCase(),s=-1!=o.indexOf("iphone");s?document.getElementById(e).innerHTML='<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" width="'+i+'" height="'+n+'" codebase="http://www.apple.com/qtactivex/qtplugin.cab"><param name="src" value="'+t+'"><param name="qtsrc" value="'+t+'"><param name="autoplay" value="false"><embed src="'+t+'" qtsrc="'+t+'" width="'+i+'" height="'+n+'" pluginspage="http://www.apple.com/quicktime/"></embed></object>':replaceIfFlash(10,e,'<embed type="application/x-shockwave-flash" src="http://assets.tumblr.com/swf/video_player.swf?22" bgcolor="#000000" quality="high" class="video_player" wmode="transparent" allowfullscreen="true" height="'+n+'" width="'+i+'" flashvars="file='+encodeURIComponent(t)+(l?"&"+l:"")+'"></embed>')},Tumblr.windowDimensions=function(){return void 0!==window.innerWidth?{width:window.innerWidth,height:window.innerHeight}:document.documentElement?{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}:{width:document.body.clientWidth,height:document.body.clientHeight}},Tumblr.Lightbox=function(){function e(e,n){if(!document.getElementById("tumblr_lightbox")){if(n||(n=1),r=e,navigator&&-1!=navigator.userAgent.indexOf("Firefox")){var m=document.createElement("input");m.setAttribute("id","Tumblr_Lightbox_focus_input"),m.setAttribute("type","text"),m.style.position="fixed",m.style.top=0,m.style.left=0,document.body.appendChild(m),m.focus(),document.body.removeChild(m)}else window.focus();o||(window.onkeydown&&(s=window.onkeydown),window.onkeydown=function(e){if(document.getElementById("tumblr_lightbox")){e||(e=window.event);var n=e.charCode?e.charCode:e.keyCode;if(e.shiftKey||e.ctrlKey||e.altKey||e.metaKey){if((e.ctrlKey||e.metaKey)&&87==n)return t(),!1}else 37==n?h>1&&i(h-1):39==n?h<r.length&&i(h+1):(27==n||32==n||74==n||75==n)&&t()}s&&s()},window.onresize&&(a=window.onresize),window.onresize=function(){document.getElementById("vignette")&&(document.getElementById("vignette").style.display="none",c&&clearTimeout(c),c=setTimeout(function(){document.getElementById("vignette").style.display="inline-block"},100)),l(),a&&a()},navigator&&-1!=navigator.userAgent.search("iPad")&&document.addEventListener("touchmove",function(){t()},!1),o=!0),document.body.style.overflow="hidden";var u=document.createElement("div");if(u.setAttribute("id","tumblr_lightbox"),navigator&&-1!=navigator.userAgent.search("iPad")?(u.style.position="absolute",u.style.top=document.body.scrollTop+"px",u.style.height=window.innerHeight+"px"):(u.style.position="fixed",u.style.top="0px",u.style.bottom="0px"),u.style.left="0px",u.style.right="0px",u.style.zIndex=4294967294,u.style.overflow="hidden",u.style.backgroundColor=navigator&&-1!=navigator.userAgent.indexOf("MSIE")?"#222":"rgba(15,15,15,0.95)",u.onclick=function(){d?d=!1:t()},!(navigator&&-1!=navigator.userAgent.search("iPad")||navigator&&-1!=navigator.userAgent.search("MSIE"))){var g=document.createElement("img");g.setAttribute("id","vignette"),g.setAttribute("src","http://assets.tumblr.com/images/full_page_vignette.png"),g.style.position="absolute",g.style.width="100%",g.style.height="100%",g.style.left="0px",g.style.top="0px",u.appendChild(g);var p=document.createElement("div");p.style.position="absolute",p.style.width="100%",p.style.height="100%",p.style.left="0px",p.style.top="0px",u.appendChild(p)}var y=document.createElement("div");y.style.position="absolute",y.style.left="50%",y.style.top="50%",u.appendChild(y);for(var b=["left","center","right"];stage_name=b.pop();){var w=document.createElement("a");w.setAttribute("id","tumblr_lightbox_"+stage_name+"_link"),w.setAttribute("href","#"),r.length<2&&(w.style.cursor="default"),y.appendChild(w);var x=document.createElement("img");x.setAttribute("id","tumblr_lightbox_"+stage_name+"_image"),x.setAttribute("src","http://assets.tumblr.com/images/x.gif"),x.style.mozBorderRadius="3px",x.style.webkitBorderRadius="3px",x.style.borderRadius="3px",navigator&&-1!=navigator.userAgent.indexOf("Chrome")&&(x.style.moxBoxShadow="0 4px 30px rgba(0,0,0,1)",x.style.webkitBoxShadow="0 4px 30px rgba(0,0,0,1)",x.style.boxShadow="0 4px 30px rgba(0,0,0,1)"),x.style.borderWidth="0px",x.style.position="absolute","center"==stage_name&&(x.style.zIndex=4294967295),w.appendChild(x)}var f=document.createElement("div");f.setAttribute("id","tumblr_lightbox_caption"),f.style.position="absolute",f.style.textAlign="center",f.style.font="bold 17px 'HelveticaNeue','Helvetica','Arial',sans-serif",f.style.color="#fff",f.style.paddingTop="20px",f.style.textShadow="0 4px 30px rgba(0,0,0,1)",f.style.display="inline-block",f.style.textRendering="optimizeLegibility",y.appendChild(f),document.body.appendChild(u),i(n),l()}}function t(){document.body.style.overflow="",document.getElementById("tumblr_lightbox").style.display="none",document.body.removeChild(document.getElementById("tumblr_lightbox"))}function i(e){if(h=e,m=Math.round(1e12*Math.random()),document.getElementById("tumblr_lightbox_left_link").onclick=function(){return d=!0,i(e-1),!1},document.getElementById("tumblr_lightbox_center_link").onclick=1==r.length?function(){return!1}:e<r.length?function(){return d=!0,i(e+1),!1}:function(){return d=!0,i(1),!1},document.getElementById("tumblr_lightbox_right_link").onclick=document.getElementById("tumblr_lightbox_center_link").onclick,u.left=!1,u.center=!1,u.right=!1,n("center",e-1),e>1&&n("left",e-2),e<r.length&&n("right",e),e+1<r.length){var t=new Image;t.src=r[e+1].low_res}}function n(e,t){var i=new Image,n=!1;i.className=m,i.onload=function(){this.className==m&&(this.className="high-res",u[e]=this,l())},i.src=r[t].high_res,i.complete||(n=new Image,n.className=m,n.onload=function(){this.className!=m||u[e]&&"placeholder"!=u[e].className||(this.className="low-res",u[e]=this,l())},n.src=r[t].low_res),r[t].width&&r[t].height&&(n&&(n.style.maxWidth=r[t].width+"px",n.style.maxHeight=r[t].height+"px"),i.style.maxWidth=r[t].width+"px",i.style.maxHeight=r[t].height+"px"),r[t].width&&r[t].height&&(u[e]=new Image(r[t].width,r[t].height),u[e].style.maxWidth=r[t].width+"px",u[e].style.maxHeight=r[t].height+"px",u[e].src="http://assets.tumblr.com/images/x.gif",u[e].className="placeholder")}function l(){for(var e=["right","left","center"];stage_name=e.pop();){var t=document.getElementById("tumblr_lightbox_"+stage_name+"_image");if(t){var i=u[stage_name];if(i){t.style.display="inline-block";var n=i.style.maxWidth?parseInt(i.style.maxWidth,10):i.width,l=i.style.maxHeight?parseInt(i.style.maxHeight,10):i.height;if(Tumblr.windowDimensions().width/Tumblr.windowDimensions().height<n/l){var o=1==r.length?.85:.75;Tumblr.windowDimensions().width*o>n&&("high-res"==i.className||i.style.maxWidth)?(t.style.width=n+"px",t.style.height=l+"px"):(t.style.height=l*(Tumblr.windowDimensions().width*o/n)+"px",t.style.width=Tumblr.windowDimensions().width*o+"px")}else.85*Tumblr.windowDimensions().height>l&&("high-res"==i.className||i.style.maxHeight)?(t.style.width=n+"px",t.style.height=l+"px"):(t.style.width=n*(.85*Tumblr.windowDimensions().height/l)+"px",t.style.height=.85*Tumblr.windowDimensions().height+"px");"center"==stage_name?(t.style.left=0-parseInt(t.style.width,10)/2+"px",t.style.top=0-parseInt(t.style.height,10)/2+"px"):(t.style[stage_name]=0-(parseInt(t.style.width,10)+.42*Tumblr.windowDimensions().width)+"px",t.style.top=0-parseInt(t.style.height,10)/2+"px"),t.src=i.src,t.style.backgroundColor="placeholder"==i.className?navigator&&-1!=navigator.userAgent.indexOf("MSIE")?"#444":"rgba(255,255,255,0.05)":"transparent","center"==stage_name&&r[h-1].caption?(document.getElementById("tumblr_lightbox_caption").innerHTML=r[h-1].caption,document.getElementById("tumblr_lightbox_caption").style.width=.7*Tumblr.windowDimensions().width+"px",document.getElementById("tumblr_lightbox_caption").style.top=.5*parseInt(t.style.height,10)+"px",document.getElementById("tumblr_lightbox_caption").style.left=0-.35*Tumblr.windowDimensions().width+"px",document.getElementById("tumblr_lightbox_caption").style.display="block"):"center"==stage_name&&(document.getElementById("tumblr_lightbox_caption").style.display="none")}else t.style.display="none"}}}var o=!1,s=!1,a=!1,r=[],d=!1,h=!1,m=!1,c=!1,u={left:!1,center:!1,right:!1};return{init:e}}();
